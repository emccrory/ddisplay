\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer}{\section{gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server Class Reference}
\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer}\index{gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server@{gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a30d87c4d7e8e05b5b6d8785c6e3eef28}{Messaging\-Server} (int port)
\item 
void \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a3220e534a53110da48c7e5f6df040d9b}{start} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a21789d252cd214b1a9c90191e0e099f5}{main} (String\mbox{[}$\,$\mbox{]} args)
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static final String \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5c67a54a24cf497a06663dc39bea297c}{S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E} = \char`\"{}Server Message\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5a50b65fa87865fe59cf7709b2870317}{broadcast} (\hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessageCarrier}{Message\-Carrier} mc)
\item 
void \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2271a86a2c87c75ad1e810a19011b25d}{broadcast} (Signed\-Object message)
\item 
void \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_aebce313d0e269b077a451ece8b4875ae}{display} (String msg)
\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2da180707d65204eec94abac4f5592a4}{void {\bfseries error} (String msg)}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2da180707d65204eec94abac4f5592a4}

\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a8fec418ccb83c94dc991a3dae8bd3a61}{void {\bfseries print\-Stack\-Trace} (Exception e)}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a8fec418ccb83c94dc991a3dae8bd3a61}

\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a1190bd0be174fa749b1261029d3fb331}{String {\bfseries exception\-String} (Exception e)}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a1190bd0be174fa749b1261029d3fb331}

\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5f5d27ad4e207e64e1a761ec38e7fbf9}{void {\bfseries perform\-Diagnostics} (boolean show)}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5f5d27ad4e207e64e1a761ec38e7fbf9}

\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a80a16ecf5f28687629cc454c9c42f3ff}{void {\bfseries show\-All\-Clients\-Connected\-Now} ()}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a80a16ecf5f28687629cc454c9c42f3ff}

\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2038249b23a5ce9f47e61390fb5a1cb4}{Simple\-Date\-Format {\bfseries sdf}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2038249b23a5ce9f47e61390fb5a1cb4}

\item 
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_ab074f0f7a5ba0d2f797e86a94c96c776}{int {\bfseries total\-Messsages\-Handled} = 0}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_ab074f0f7a5ba0d2f797e86a94c96c776}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
The server that can be run both as a console application or a G\-U\-I

T\-O\-D\-O\-: Improve the architecture

According to \href{http://docs.oracle.com/cd/E19957-01/816-6024-10/apa.htm}{\tt http\-://docs.\-oracle.\-com/cd/\-E19957-\/01/816-\/6024-\/10/apa.\-htm} (the first hit on Google for \char`\"{}\-Messaging Server Architecture\char`\"{}), a well-\/built messaging server has these six components\-: 
\begin{DoxyItemize}
\item The dispatcher is the daemon (or service) component of the Messaging Server. It coordinates the activities of all other modules. In Figure A.\-1, the dispatcher can be thought of as an envelope that contains and initiates the processes of all items shown within the largest box. 
\item The module configuration database contains general configuration information for the other modules. 
\item The message transfer agent (M\-T\-A) handles all message accepting, routing, and delivery tasks. 
\item The Messaging Server managers facilitate remote configuration and operation of the system and ensure that the modules are doing their job and following the rules. 
\item The Auto\-Reply utility lets the Messaging Server automatically reply to incoming messages with predefined responses of your choice. 
\item The directory database--either a local directory database or a Directory Server--contains user and group account information for the other modules. 
\end{DoxyItemize}

In this application of the idea, I have pretty much a stove-\/pipe server with only one bit of a protocol, handled elsewhere. The message is an object (see Message\-Carrier.\-java) with four attributes\-: 
\begin{DoxyItemize}
\item \hyperlink{enumgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessageType}{Message\-Type} type; -- An enum of the sorts of messages we expect 
\item String message; -- The message body (if it is required). in principle, this can be encrypted (and then A\-S\-C\-I\-I-\/fied). In this architecture, when the message is used, it is usually an X\-M\-L document 
\item String to; -- The name of the client who is supposed to get this message 
\item String from; -- The name of the client who sent the message (allowing a reply of some sort) 
\end{DoxyItemize}

It may be possible to use Object\-Output\-Stream and Object\-Input\-Stream to send the Encoded\-Carrier (X\-M\-L) object directly, without the existing X\-M\-L marshalling and unmarshalling. But since this works, I have little motivation to make this change. Future developers may be more enthusiastic to do this. The existing scheme makes it easy to add on encryption of the message (which is the X\-M\-L document), which would allow the routing of the message without decrypting. 

What about encryption? If we ever need to secure this communication, it should be possible to encrypt parts of the message. A simple way to implement this would be to add a time stamp to \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessageCarrier}{Message\-Carrier} which is encrypted and re-\/\-A\-S\-C\-I\-I-\/fied. Using an asymmetric encryption, the source (the \hyperlink{classgov_1_1fnal_1_1ppd_1_1dd_1_1ChannelSelector}{Channel\-Selector}) can encrypt it with its secret key and then the destination (the Display) can decrypt it with the public key and then verify that the date is \char`\"{}recent\char`\"{}. Or one can encrypt the X\-M\-L document itself (which includes a time stamp). This will probably not be necessary at Fermilab as it is hard to imagine a situation where someone would put bad stuff into the stream of messages and foul things up. But hackers are a clever bunch, so never say never. 

We have opted not to encrypt these messages, but rather to cryptographically sign them. 

An operational observation\-: A Client often drop out without saying goodbye. Almost always when this happens, the socket connection between the server and the client gets corrupted and the server notices. When it does notice, it can delete this client from its inventory. But sometimes this corruption does not happen and the socket somehow remains viable from the server's perspective. In this situation, when the Client tries to reconnect it is turned away as its name is already in use. Thus, I have implemented a heart beat from the server to each client to see if this client really is alive. See start\-Pinger() method for details. 

\begin{DoxyAuthor}{Author}
Elliott Mc\-Crory, Fermilab A\-D/\-Instrumentation 
\end{DoxyAuthor}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a30d87c4d7e8e05b5b6d8785c6e3eef28}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!Messaging\-Server@{Messaging\-Server}}
\index{Messaging\-Server@{Messaging\-Server}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{Messaging\-Server}]{\setlength{\rightskip}{0pt plus 5cm}gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-Messaging\-Server (
\begin{DoxyParamCaption}
\item[{int}]{port}
\end{DoxyParamCaption}
)}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a30d87c4d7e8e05b5b6d8785c6e3eef28}
server constructor that receive the port to listen to for connection as parameter in console


\begin{DoxyParams}{Parameters}
{\em port} & \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5a50b65fa87865fe59cf7709b2870317}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!broadcast@{broadcast}}
\index{broadcast@{broadcast}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{broadcast}]{\setlength{\rightskip}{0pt plus 5cm}void gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-broadcast (
\begin{DoxyParamCaption}
\item[{{\bf Message\-Carrier}}]{mc}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5a50b65fa87865fe59cf7709b2870317}
Broadcast an unsigned message to a Client

Overrideable if the base class wants to know about the messages.

Be sure to call super.\-broadcast(message) to actually get the message broadcast, though!


\begin{DoxyParams}{Parameters}
{\em mc} & The message to broadcast \\
\hline
\end{DoxyParams}
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2271a86a2c87c75ad1e810a19011b25d}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!broadcast@{broadcast}}
\index{broadcast@{broadcast}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{broadcast}]{\setlength{\rightskip}{0pt plus 5cm}void gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-broadcast (
\begin{DoxyParamCaption}
\item[{Signed\-Object}]{message}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a2271a86a2c87c75ad1e810a19011b25d}
Broadcast a signed message to a Client

Overrideable if the base class wants to know about the messages.

Be sure to call super.\-broadcast(message) to actually get the message broadcast, though!


\begin{DoxyParams}{Parameters}
{\em message} & -- The message to broadcast \\
\hline
\end{DoxyParams}
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_aebce313d0e269b077a451ece8b4875ae}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!display@{display}}
\index{display@{display}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{display}]{\setlength{\rightskip}{0pt plus 5cm}void gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-display (
\begin{DoxyParamCaption}
\item[{String}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_aebce313d0e269b077a451ece8b4875ae}
Display a message to the console or the G\-U\-I \hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a21789d252cd214b1a9c90191e0e099f5}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!main@{main}}
\index{main@{main}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}static void gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-main (
\begin{DoxyParamCaption}
\item[{String\mbox{[}$\,$\mbox{]}}]{args}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a21789d252cd214b1a9c90191e0e099f5}
To run as a console application just open a console window and\-: $>$ java Server $>$ java Server port\-Number If the port number is not specified 1500 is used


\begin{DoxyParams}{Parameters}
{\em args} & -- The command line arguments. \mbox{[}0\mbox{]} is the port number, otherwise M\-E\-S\-S\-A\-G\-I\-N\-G\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-P\-O\-R\-T (49999) is used \\
\hline
\end{DoxyParams}
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a3220e534a53110da48c7e5f6df040d9b}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!start@{start}}
\index{start@{start}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{start}]{\setlength{\rightskip}{0pt plus 5cm}void gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-start (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a3220e534a53110da48c7e5f6df040d9b}
Start the messaging server 

\subsection{Member Data Documentation}
\hypertarget{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5c67a54a24cf497a06663dc39bea297c}{\index{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}!S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E@{S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E}}
\index{S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E@{S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E}!gov::fnal::ppd::dd::chat::xml::MessagingServer@{gov\-::fnal\-::ppd\-::dd\-::chat\-::xml\-::\-Messaging\-Server}}
\subsubsection[{S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E}]{\setlength{\rightskip}{0pt plus 5cm}final String gov.\-fnal.\-ppd.\-dd.\-chat.\-xml.\-Messaging\-Server.\-S\-P\-E\-C\-I\-A\-L\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-M\-E\-S\-S\-A\-G\-E\-\_\-\-U\-S\-E\-R\-N\-A\-M\-E = \char`\"{}Server Message\char`\"{}\hspace{0.3cm}{\ttfamily [static]}}}\label{classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1xml_1_1MessagingServer_a5c67a54a24cf497a06663dc39bea297c}
The name we use for the messaging server, when it is sending a message out 

The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
src/gov/fnal/ppd/dd/chat/xml/Messaging\-Server.\-java\end{DoxyCompactItemize}
