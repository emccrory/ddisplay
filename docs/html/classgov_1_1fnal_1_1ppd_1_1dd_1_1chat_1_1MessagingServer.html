<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Fermilab Dynamic Displays System: gov.fnal.ppd.dd.chat.MessagingServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Fermilab Dynamic Displays System
   &#160;<span id="projectnumber">5.3.6</span>
   </div>
   <div id="projectbrief">Fermilab&#39;s implementation of a digital signage system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">gov.fnal.ppd.dd.chat.MessagingServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for gov.fnal.ppd.dd.chat.MessagingServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.png" usemap="#gov.fnal.ppd.dd.chat.MessagingServer_map" alt=""/>
  <map id="gov.fnal.ppd.dd.chat.MessagingServer_map" name="gov.fnal.ppd.dd.chat.MessagingServer_map">
<area href="interfacegov_1_1fnal_1_1ppd_1_1dd_1_1util_1_1nonguiUtils_1_1JavaChangeListener.html" alt="gov.fnal.ppd.dd.util.nonguiUtils.JavaChangeListener" shape="rect" coords="0,0,307,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9b02c801edad834dcc2a0c96071900af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a9b02c801edad834dcc2a0c96071900af">MessagingServer</a> (int port)</td></tr>
<tr class="separator:a9b02c801edad834dcc2a0c96071900af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69cf69b0f944a33ba7e1b9c32dd60ee6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a69cf69b0f944a33ba7e1b9c32dd60ee6">start</a> ()</td></tr>
<tr class="separator:a69cf69b0f944a33ba7e1b9c32dd60ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca524f1db3320d40d3e5c0144802765"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a8ca524f1db3320d40d3e5c0144802765">javaHasChanged</a> ()</td></tr>
<tr class="separator:a8ca524f1db3320d40d3e5c0144802765"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae9c73322e842357c87634a60426e5bf0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#ae9c73322e842357c87634a60426e5bf0">numRemovedBadWriteSeen</a> = 0</td></tr>
<tr class="separator:ae9c73322e842357c87634a60426e5bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe04e43605b1c81c063cf9d334fb763"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a3fe04e43605b1c81c063cf9d334fb763">numRemovedNullClientThread</a> = 0</td></tr>
<tr class="separator:a3fe04e43605b1c81c063cf9d334fb763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d7bc143f1eee20c7e39ce9024783c9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a84d7bc143f1eee20c7e39ce9024783c9">numRemovedNullUsername</a> = 0</td></tr>
<tr class="separator:a84d7bc143f1eee20c7e39ce9024783c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab986fa29bcdc51bd186ad23e1c699426"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#ab986fa29bcdc51bd186ad23e1c699426">numRemovedNullDate</a> = 0</td></tr>
<tr class="separator:ab986fa29bcdc51bd186ad23e1c699426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189ff6081d21eb1a9c98887d84e23b17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a189ff6081d21eb1a9c98887d84e23b17">numRemovedExitedForeverLoop</a> = 0</td></tr>
<tr class="separator:a189ff6081d21eb1a9c98887d84e23b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a738da0a18944421491268d2220a3c7a4"><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a738da0a18944421491268d2220a3c7a4">SPECIAL_SERVER_MESSAGE_USERNAME</a> = &quot;Server Message&quot;</td></tr>
<tr class="separator:a738da0a18944421491268d2220a3c7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad4cb5effceeb2b11031e3cf2ec0e5939"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#ad4cb5effceeb2b11031e3cf2ec0e5939">broadcast</a> (<a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1xml_1_1MessageCarrierXML.html">MessageCarrierXML</a> mc)</td></tr>
<tr class="separator:ad4cb5effceeb2b11031e3cf2ec0e5939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe655a915ee116333ee6f1c8331b7929"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#afe655a915ee116333ee6f1c8331b7929">exceptionString</a> (Exception e)</td></tr>
<tr class="separator:afe655a915ee116333ee6f1c8331b7929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af24f72f6ce9d270c33afb4032d9c968b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#af24f72f6ce9d270c33afb4032d9c968b">performDiagnostics</a> (boolean show)</td></tr>
<tr class="separator:af24f72f6ce9d270c33afb4032d9c968b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90da887bb782b08af3fb1dbce8c3e502"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a90da887bb782b08af3fb1dbce8c3e502">showAllClientsConnectedNow</a> ()</td></tr>
<tr class="separator:a90da887bb782b08af3fb1dbce8c3e502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab9736895b528ec810dd27eb5761295"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a2ab9736895b528ec810dd27eb5761295">stop</a> ()</td></tr>
<tr class="separator:a2ab9736895b528ec810dd27eb5761295"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac727c375b30722fb0d0a88f27eb97954"><td class="memItemLeft" align="right" valign="top">SimpleDateFormat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#ac727c375b30722fb0d0a88f27eb97954">sdf</a></td></tr>
<tr class="separator:ac727c375b30722fb0d0a88f27eb97954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6847562b2441991b550f7b3cb7fe8f2d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#a6847562b2441991b550f7b3cb7fe8f2d">totalMesssagesHandled</a> = 0</td></tr>
<tr class="separator:a6847562b2441991b550f7b3cb7fe8f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc91232824dd5e89347e0d8ac29abae8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1LoggerForDebugging.html">LoggerForDebugging</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#acc91232824dd5e89347e0d8ac29abae8">logger</a></td></tr>
<tr class="separator:acc91232824dd5e89347e0d8ac29abae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:abb85ff8b189da86dfc20bd3313ea79d6"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html#abb85ff8b189da86dfc20bd3313ea79d6">MAX_CONSECUTIVE_UNPONGED_PINGS</a> = 10</td></tr>
<tr class="separator:abb85ff8b189da86dfc20bd3313ea79d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The central messaging server for the Dynamic Displays system</p>
<p>In this application of the idea, I have pretty much a stove-pipe server with only one bit of a protocol, handled elsewhere. The message is an object (see <a class="el" href="MessageCarrierXML_8java.html">MessageCarrierXML.java</a>) with four attributes: </p>
<ul>
<li>
MessageType type; &ndash; An enum of the sorts of messages we expect </li>
<li>
String message; &ndash; The message body (if it is required). in principle, this can be encrypted (and then ASCII-fied). In this architecture, when the message is used, it is usually an XML document </li>
<li>
String to; &ndash; The name of the client who is supposed to get this message. <em>This could be changed to a "subscription topic."</em> </li>
<li>
String from; &ndash; The name of the client who sent the message (allowing a reply of some sort) </li>
</ul>
<p>It may be possible to use ObjectOutputStream and ObjectInputStream to send the EncodedCarrier (XML) object directly, without the existing XML marshalling and unmarshalling. But since this works, I have little motivation to make this change. Future developers may be more enthusiastic to do this. The existing scheme makes it easy to add on encryption of the message (which is the XML document), which would allow the routing of the message without decrypting. </p>
<p>What about encryption? If we ever need to secure this communication, it should be possible to encrypt parts of the message. A simple way to implement this would be to add a time stamp to MessageCarrierXML which is encrypted and re-ASCII-fied. Using an asymmetric encryption, the source (the <a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1ChannelSelector.html">ChannelSelector</a>) can encrypt it with its secret key and then the destination (the Display) can decrypt it with the public key and then verify that the date is "recent". Or one can encrypt the XML document itself (which includes a time stamp). This will probably not be necessary at Fermilab as it is hard to imagine a situation where someone would put bad stuff into the stream of messages and foul things up. But hackers are a clever bunch, so never say never. </p>
<p>We have opted not to encrypt these messages, but rather to cryptographically sign them. </p>
<p>An operational observation: A Client often drop out without saying goodbye. Almost always when this happens, the socket connection between the server and the client gets corrupted and the server notices. When it does notice, it can delete this client from its inventory. But sometimes this corruption does not happen and the socket somehow remains viable from the server's perspective. In this situation, when the Client tries to reconnect it is turned away as its name is already in use. Thus, I have implemented a heart beat from the server to each client to see if this client really is alive. See startPinger() method for details. </p>
<h1>To Do list</h1>
<p><b>TODO (0)</b> &ndash; Improve the architecture </p>
<p>According to <a href="http://docs.oracle.com/cd/E19957-01/816-6024-10/apa.htm">http://docs.oracle.com/cd/E19957-01/816-6024-10/apa.htm</a> (the first hit on Google for "Messaging Server Architecture" ), a well-built messaging server has these six components: </p>
<ul>
<li>
The dispatcher is the daemon (or service) component of the Messaging Server. It coordinates the activities of all other modules. In Figure A.1, the dispatcher can be thought of as an envelope that contains and initiates the processes of all items shown within the largest box. <em>Yes-ish</em> </li>
<li>
The module configuration database contains general configuration information for the other modules.<em>Yes-ish</em> </li>
<li>
The message transfer agent (MTA) handles all message accepting, routing, and delivery tasks. <em>Yes-ish</em> </li>
<li>
The Messaging Server managers facilitate remote configuration and operation of the system and ensure that the modules are doing their job and following the rules. <em>Not really</em> </li>
<li>
The AutoReply utility lets the Messaging Server automatically reply to incoming messages with predefined responses of your choice. <em>No</em> </li>
<li>
The directory database&ndash;either a local directory database or a Directory Server&ndash;contains user and group account information for the other modules. <em>Yes-ish</em> </li>
</ul>
<p><b>TODO (1)</b> &ndash; New message to return the status of the server</p>
<p>It would be a useful diagnostic to ask the server to return a diagnostics dump. The data in this dump would include the stuff that is kept in the diagnostics method, like the client names, how many messages there have been, some accounting for the errors that have been handled, how old each client is and how long since we have last seen it, etc.</p>
<p>This would be a new message type, I think.</p>
<p>In a publish/subscribe implementation, this would be a dedicated subject called something like "ServerStatus".</p>
<p><b>TODO (2)</b> &ndash; Handshake</p>
<p>I think, in general, there needs to be a handshake in the protocol. The thing that is missing is that the client that sends a "change the channel" message gets no feedback that its signature is wrong or that it does not have the authority to command that display. This new message will need this sort of handshake, and we definitely can use this handshake in the normal message flow.</p>
<p>This has been partially implemented (2021). The client gets an acknowledgement that the channel has been changed.</p>
<p><b>TODO (3)</b> &ndash; Publish/Subscribe</p>
<p>This has been partially implemented. While it would certainly be possible to take this partial implementation to completion, it would probably be more reliable and useful to find a package that does publish/subscribe and work that into this class.</p>
<p>Here is a bare-bones example implementation: <a href="https://medium.com/easyread/create-your-own-java-pubsub-library-fbee21d0bb44">https://medium.com/easyread/create-your-own-java-pubsub-library-fbee21d0bb44</a></p>
<p>There are many other simple implementations available. Simple could be the best, but it needs to withstand the 24x7 demands of this system.</p>
<p>The advantages of this approach, IMHO, would be: </p>
<ul>
<li>
More reliable code because someone else wrote it and debugged it on a wider set of projects than this suite </li>
<li>
It seems likely that a lot of the complexity of the server will be reduced, but that remains to be seen </li>
<li>
Several new things become available, like when a display re-connects, it knows what the last "Change Channel" command was  </li>
<li>
New, useful things (many of them listed above) can be implemented, like a "Status" subject, and a "Heartbeat" subject. </li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Elliott McCrory, Fermilab AD/Instrumentation </dd></dl>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00175">175</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9b02c801edad834dcc2a0c96071900af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gov.fnal.ppd.dd.chat.MessagingServer.MessagingServer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>server constructor that receive the port to listen to for connection as parameter in console</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00889">889</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad4cb5effceeb2b11031e3cf2ec0e5939"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gov.fnal.ppd.dd.chat.MessagingServer.broadcast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1xml_1_1MessageCarrierXML.html">MessageCarrierXML</a>&#160;</td>
          <td class="paramname"><em>mc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Broadcast an unsigned message to a Client</p>
<p>Overrideable if the base class wants to know about the messages.</p>
<p>Be sure to call super.broadcast(message) to actually get the message broadcast, though!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mc</td><td>The message to broadcast </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00949">949</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="afe655a915ee116333ee6f1c8331b7929"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String gov.fnal.ppd.dd.chat.MessagingServer.exceptionString </td>
          <td>(</td>
          <td class="paramtype">Exception&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Display a message to the console or the GUI </p>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l01029">1029</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a8ca524f1db3320d40d3e5c0144802765"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gov.fnal.ppd.dd.chat.MessagingServer.javaHasChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="interfacegov_1_1fnal_1_1ppd_1_1dd_1_1util_1_1nonguiUtils_1_1JavaChangeListener.html#af445b8c9b305e7493a08dc75266e2c7b">gov.fnal.ppd.dd.util.nonguiUtils.JavaChangeListener</a>.</p>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l01684">1684</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="af24f72f6ce9d270c33afb4032d9c968b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gov.fnal.ppd.dd.chat.MessagingServer.performDiagnostics </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>show</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l01049">1049</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a90da887bb782b08af3fb1dbce8c3e502"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gov.fnal.ppd.dd.chat.MessagingServer.showAllClientsConnectedNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l01467">1467</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a69cf69b0f944a33ba7e1b9c32dd60ee6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gov.fnal.ppd.dd.chat.MessagingServer.start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start the messaging server </p>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l01242">1242</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a2ab9736895b528ec810dd27eb5761295"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gov.fnal.ppd.dd.chat.MessagingServer.stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l01670">1670</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="acc91232824dd5e89347e0d8ac29abae8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1LoggerForDebugging.html">LoggerForDebugging</a> gov.fnal.ppd.dd.chat.MessagingServer.logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00876">876</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="abb85ff8b189da86dfc20bd3313ea79d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int gov.fnal.ppd.dd.chat.MessagingServer.MAX_CONSECUTIVE_UNPONGED_PINGS = 10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00188">188</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="ae9c73322e842357c87634a60426e5bf0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gov.fnal.ppd.dd.chat.MessagingServer.numRemovedBadWriteSeen = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00858">858</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a189ff6081d21eb1a9c98887d84e23b17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gov.fnal.ppd.dd.chat.MessagingServer.numRemovedExitedForeverLoop = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00862">862</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a3fe04e43605b1c81c063cf9d334fb763"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gov.fnal.ppd.dd.chat.MessagingServer.numRemovedNullClientThread = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00859">859</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="ab986fa29bcdc51bd186ad23e1c699426"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gov.fnal.ppd.dd.chat.MessagingServer.numRemovedNullDate = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00861">861</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a84d7bc143f1eee20c7e39ce9024783c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gov.fnal.ppd.dd.chat.MessagingServer.numRemovedNullUsername = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00860">860</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="ac727c375b30722fb0d0a88f27eb97954"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SimpleDateFormat gov.fnal.ppd.dd.chat.MessagingServer.sdf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00845">845</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a738da0a18944421491268d2220a3c7a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String gov.fnal.ppd.dd.chat.MessagingServer.SPECIAL_SERVER_MESSAGE_USERNAME = &quot;Server Message&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The name we use for the messaging server, when it is sending a message out </p>

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00186">186</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<a class="anchor" id="a6847562b2441991b550f7b3cb7fe8f2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int gov.fnal.ppd.dd.chat.MessagingServer.totalMesssagesHandled = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MessagingServer_8java_source.html#l00853">853</a> of file <a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/gov/fnal/ppd/dd/chat/<a class="el" href="MessagingServer_8java_source.html">MessagingServer.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacegov.html">gov</a></li><li class="navelem"><a class="el" href="namespacegov_1_1fnal.html">fnal</a></li><li class="navelem"><a class="el" href="namespacegov_1_1fnal_1_1ppd.html">ppd</a></li><li class="navelem"><a class="el" href="namespacegov_1_1fnal_1_1ppd_1_1dd.html">dd</a></li><li class="navelem"><a class="el" href="namespacegov_1_1fnal_1_1ppd_1_1dd_1_1chat.html">chat</a></li><li class="navelem"><a class="el" href="classgov_1_1fnal_1_1ppd_1_1dd_1_1chat_1_1MessagingServer.html">MessagingServer</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
